AWSTemplateFormatVersion: 2010-09-09
Resources:
  RandomPassword:
    Type: AWS::SecretsManager::Secret
    Properties: 
      Description: The password generated by random_password
      GenerateSecretString:
        SecretStringTemplate: !Sub '${Password}'
        GenerateStringKey: password
        PasswordLength: 16
        ExcludeCharacters: 
          - '!'
          - '#'
          - '%'
          - '*'
          - '('
          - ')'
          - '-'
          - _
          - '+'
          - '='
          - '['
          - ']'
          - '{'
          - '}'
          - '|'
          - ';'
          - ':'
          - ','
          - '.'
          - '<'
          - '>'
          - '?'
          - '~'
          - ' '

  Parameters:
    Type: AWS::SSM::Parameter
    Properties:
      Name: parameters
      Type: String
      Value: !Join 
        - ','
        - - !Ref RandomPassword.SecretString
          - !Ref Parameters

Outputs:
  AWSSSMParameter:
    Value: !Ref Parameters